<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://cdnjs.cloudflare.com https://www.gstatic.com https://www.googleapis.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; connect-src 'self' https://*.firebaseio.com https://*.googleapis.com https://*.gstatic.com https://*.firebasestorage.app wss: https:; object-src 'none'; base-uri 'none'; frame-ancestors 'self';">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="Referrer-Policy" content="no-referrer">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no"/>
  <title>GhostCHAT üëª‚ö° ‚Äî E2E ONLY</title>
  <link rel="icon" href="assets/ghost.png"/>
  <link rel="stylesheet" href="style.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
  <canvas id="matrixBG" aria-hidden="true"></canvas>

  <div class="app" id="appBox">
    <header class="appHeader">
      <h1>üëª‚ö° GhostCHAT</h1>
      <div class="chips">
        <button class="chip"  title="Telegram">‚úàÔ∏è Telegram</button>
      </div>
    </header>

    <div class="topControls">
      <button id="btnCreate" class="btn primary">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
      <button id="btnClear" class="btn ghost">–û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>

    <div class="joinRow">
      <input id="joinInput" placeholder="–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã –∏–ª–∏ —Å—Å—ã–ª–∫–∞ (—Å –∫–ª—é—á–æ–º)" spellcheck="false" autocomplete="off"/>
      <button id="btnJoin" class="btn success">–í–æ–π—Ç–∏</button>
    </div>

    <div id="roomsList" class="roomsList"></div>

    <div class="qrPanicRow">
      <button id="btnQR" class="btn">üü© QR/–°—Å—ã–ª–∫–∞</button>
      <button id="btnPanic" class="btn panic">üö® –ü–∞–ª–µ–≤–æ</button>
    </div>

    <div id="qrBox" class="qrBox qrHidden" aria-hidden="true">
      <div id="inviteLink" class="inviteLink"></div>
      <div class="qrRow">
        <div id="qrcode" class="qrcode" aria-label="QR –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è"></div>
      </div>
      <div class="qrActions">
        <button id="btnCopy" class="btn small">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
        <button id="btnShowKey" class="btn small">–ü–æ–∫–∞–∑–∞—Ç—å –∫–ª—é—á</button>
        <button id="btnKeyQR" class="btn small">QR –∫–ª—é—á–∞</button>
        <button id="btnResetKey" class="btn small">–°–±—Ä–æ—Å–∏—Ç—å –∫–ª—é—á</button>
      </div>
      <div class="keyInfo">–ö–ª—é—á —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ (E2E –≤–∫–ª—é—á—ë–Ω)</div>
    </div>

    <div id="chatArea" class="chatArea"></div>

    <div class="inputBar">
      <button id="attachBtn" class="circle left" title="–°–∫—Ä–µ–ø–∫–∞">üìé</button>
      <textarea id="msgInput" rows="1" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..."></textarea>
      <button id="btnSend" class="circle send" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">‚û°Ô∏è</button>
    </div>

    <div class="footerNote">GhostCHAT ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–Ω–æ–Ω–∏–º–Ω—ã–π —á–∞—Ç ‚Ä¢ E2E ONLY</div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
